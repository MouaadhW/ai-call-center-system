[general]
static=yes
writeprotect=no
clearglobalvars=no

[globals]
CONSOLE=Console/dsp
TRUNK=PJSIP/trunk

; ============================================
; Internal Context (for registered users)
; ============================================
[from-internal]

; AI Call Center - Main Entry Point
exten => 100,1,NoOp(=== AI Call Center Entry ===)
 same => n,Answer()
 same => n,Wait(1)
 same => n,AGI(agi://backend:4573)
 same => n,Hangup()

; Echo Test
exten => 200,1,NoOp(=== Echo Test ===)
 same => n,Answer()
 same => n,Playback(demo-echotest)
 same => n,Echo()
 same => n,Hangup()

; Music on Hold Test
exten => 300,1,NoOp(=== Music on Hold Test ===)
 same => n,Answer()
 same => n,MusicOnHold()
 same => n,Hangup()

; Direct dial between extensions
exten => _600[1-3],1,NoOp(=== Direct Dial to ${EXTEN} ===)
 same => n,Dial(PJSIP/${EXTEN},30)
 same => n,Hangup()

; Invalid extension (Catch-all)
exten => _X.,1,NoOp(=== Invalid Extension ${EXTEN} ===)
 same => n,Answer()
 same => n,Playback(invalid)
 same => n,Hangup()

; Hangup handler
exten => h,1,NoOp(=== Call Ended ===)
 same => n,NoOp(Duration: ${CDR(duration)})
 same => n,NoOp(Disposition: ${CDR(disposition)})

; ============================================
; External/Trunk Context (for incoming calls)
; ============================================
[from-external]

; Route all incoming calls to AI agent
exten => _X.,1,NoOp(=== Incoming Call from ${CALLERID(num)} ===)
 same => n,Answer()
 same => n,Wait(1)
 same => n,AGI(agi://backend:4573)
 same => n,Hangup()

exten => h,1,NoOp(=== External Call Ended ===)
